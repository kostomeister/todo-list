{% extends 'base.html' %}

{% block content %}
  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="mb-0">TODO list:</h1>
      <a class="btn btn-primary" href="{% url 'todo:task-create' %}">Add task</a>
    </div>

    <hr>

    {% for task in task_list %}
      <div class="card mb-3">
        <div class="card-body">
           {% if task.is_done == False %}
            <div class="d-flex justify-content-between align-items-center">
              <h5 class="card-title">{{ task.content }}</h5>
              <a href="{% url 'todo:task-do' pk=task.id %}" class="btn btn-success">Complete</a>
            </div>
          <p class="card-text">
              <span class="text-danger">Not done</span>
              <br>
              <span>Deadline: {{ task.deadline }}</span>
            {% else %}
             <div class="d-flex justify-content-between align-items-center">
              <h5 class="card-title">{{ task.content }}</h5>
              <a href="{% url 'todo:task-undo' pk=task.id %}" class="btn btn-danger">Undo</a>
            </div>
              <span class="text-success">Done</span>
            {% endif %}
            <br>
            <span>Created at: {{ task.created_at }}</span>
            <br>
            <strong>Tags:</strong>
            {% for tag in task.tags.all %}
              <span class="badge badge-info"><a href="{% url 'todo:tag-detail' pk=tag.id %}">{{ tag.name }}</a></span>
            {% endfor %}
          </p>
          <div class="btn-group" role="group" aria-label="Task Actions">
            <a class="btn btn-primary btn-sm" href="{% url 'todo:task-update' pk=task.id %}">Update</a>
            <a class="btn btn-danger btn-sm" href="{% url 'todo:task-delete' pk=task.id %}">Delete</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
